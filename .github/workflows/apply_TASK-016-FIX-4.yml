name: Apply TASK-016-FIX-4 (datepicker integration code only)

on:
  workflow_dispatch:
    inputs:
      branch:
        description: "Branch"
        required: true
        default: "main"
      commit_message:
        description: "Message"
        required: true
        default: "TASK-016-FIX-4: integrate datepicker (uk locale) into admin exhibition forms"

permissions:
  contents: write

jobs:
  patch:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          ref: ${{ github.event.inputs.branch }}

      - name: Write pages/admin/exhibitions/new.vue
        run: |
          mkdir -p pages/admin/exhibitions
          echo 'PHRlbXBsYXRlPgogIDxkaXYgY2xhc3M9InAtNiBzcGFjZS15LTYiPgogICAgPGRpdiBjbGFzcz0iZ3JpZCBnYXAtNCBtZDpncmlkLWNvbHMtMiI+CiAgICAgIDxkaXY+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayBtYi0yIHRleHQtc20gZm9udC1tZWRpdW0iPtCd0LDQt9Cy0LAg0LLQuNGB0YLQsNCy0LrQuDwvbGFiZWw+CiAgICAgICAgPGlucHV0IHYtbW9kZWw9InRpdGxlIiB0eXBlPSJ0ZXh0IiBjbGFzcz0idy1mdWxsIGJvcmRlciByb3VuZGVkIHB4LTMgcHktMiIgcGxhY2Vob2xkZXI9ItCd0LDQv9GA0LjQutC70LDQtDogwqvQotGW0L3RliDRgtCwINCh0LLRltGC0LvQvsK7IiAvPgogICAgICA8L2Rpdj4KICAgICAgPGRpdj4KICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIG1iLTIgdGV4dC1zbSBmb250LW1lZGl1bSI+U2x1ZzwvbGFiZWw+CiAgICAgICAgPGlucHV0IHYtbW9kZWw9InNsdWciIHR5cGU9InRleHQiIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyIHJvdW5kZWQgcHgtMyBweS0yIiBwbGFjZWhvbGRlcj0ibmFwcmtsYWQtdGluaS10YS1zdml0bG8iIC8+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdj4KICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayBtYi0yIHRleHQtc20gZm9udC1tZWRpdW0iPtCe0L/QuNGBPC9sYWJlbD4KICAgICAgPHRleHRhcmVhIHYtbW9kZWw9ImRlc2NyaXB0aW9uIiByb3dzPSI1IiBjbGFzcz0idy1mdWxsIGJvcmRlciByb3VuZGVkIHB4LTMgcHktMiIgcGxhY2Vob2xkZXI9ItCa0L7RgNC+0YLQutC40Lkg0L7Qv9C40YEg0LLQuNGB0YLQsNCy0LrQuC4uLiI+PC90ZXh0YXJlYT4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImdyaWQgZ2FwLTQgbWQ6Z3JpZC1jb2xzLTIiPgogICAgICA8ZGl2PgogICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgbWItMiB0ZXh0LXNtIGZvbnQtbWVkaXVtIj7QpdGD0LTQvtC20L3QuNC6IChJRCk8L2xhYmVsPgogICAgICAgIDxpbnB1dCB2LW1vZGVsLm51bWJlcj0icGFpbnRlcklkIiB0eXBlPSJudW1iZXIiIG1pbj0iMSIgY2xhc3M9InctZnVsbCBib3JkZXIgcm91bmRlZCBweC0zIHB5LTIiIHBsYWNlaG9sZGVyPSJJRCDRhdGD0LTQvtC20L3QuNC60LAiIC8+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2PgogICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgbWItMiB0ZXh0LXNtIGZvbnQtbWVkaXVtIj7QntCx0LrQu9Cw0LTQuNC90LrQsCAoVVJMKTwvbGFiZWw+CiAgICAgICAgPGlucHV0IHYtbW9kZWw9ImNvdmVyVXJsIiB0eXBlPSJ1cmwiIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyIHJvdW5kZWQgcHgtMyBweS0yIiBwbGFjZWhvbGRlcj0iaHR0cHM6Ly8uLi4iIC8+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdj4KICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayBtYi0yIHRleHQtc20gZm9udC1tZWRpdW0iPtCX0L7QsdGA0LDQttC10L3QvdGPINC60LDRgNGC0LrQuCAoVVJMKTwvbGFiZWw+CiAgICAgIDxpbnB1dCB2LW1vZGVsPSJjYXJkVXJsIiB0eXBlPSJ1cmwiIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyIHJvdW5kZWQgcHgtMyBweS0yIiBwbGFjZWhvbGRlcj0iaHR0cHM6Ly8uLi4iIC8+CiAgICA8L2Rpdj4KCiAgICA8Q2xpZW50T25seT4KICAgICAgPGRpdj4KICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIG1iLTIgdGV4dC1zbSBmb250LW1lZGl1bSI+0J/QtdGA0ZbQvtC0INCy0LjRgdGC0LDQstC60Lg8L2xhYmVsPgogICAgICAgIDxWdWVEYXRlUGlja2VyCiAgICAgICAgICB2LW1vZGVsPSJwZXJpb2QiCiAgICAgICAgICA6bG9jYWxlPSJ1ayIKICAgICAgICAgIHJhbmdlCiAgICAgICAgICA6d2Vlay1zdGFydD0iMSIKICAgICAgICAgIDplbmFibGUtdGltZS1waWNrZXI9ImZhbHNlIgogICAgICAgICAgYXV0by1hcHBseQogICAgICAgICAgZm9ybWF0PSJkZC5NTS55eXl5IgogICAgICAgICAgcGxhY2Vob2xkZXI9ItCe0LHQtdGA0ZbRgtGMINC/0LXRgNGW0L7QtCAo0Lcg4oCUINC/0L4pIgogICAgICAgIC8+CiAgICAgIDwvZGl2PgogICAgPC9DbGllbnRPbmx5PgoKICAgIDxkaXYgY2xhc3M9InB0LTQiPgogICAgICA8YnV0dG9uCiAgICAgICAgOmRpc2FibGVkPSIhaXNWYWxpZCIKICAgICAgICBjbGFzcz0icHgtNCBweS0yIHJvdW5kZWQgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBkaXNhYmxlZDpvcGFjaXR5LTUwIgogICAgICAgIEBjbGljaz0ic3VibWl0IgogICAgICA+CiAgICAgICAg0JfQsdC10YDQtdCz0YLQuCDQstC40YHRgtCw0LLQutGDCiAgICAgIDwvYnV0dG9uPgogICAgPC9kaXY+CiAgPC9kaXY+CjwvdGVtcGxhdGU+Cgo8c2NyaXB0IHNldHVwIGxhbmc9InRzIj4KaW1wb3J0IHsgcmVmLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZScKaW1wb3J0IFZ1ZURhdGVQaWNrZXIgZnJvbSAnQHZ1ZXBpYy92dWUtZGF0ZXBpY2tlcicKaW1wb3J0IHsgdWsgfSBmcm9tICdkYXRlLWZucy9sb2NhbGUnCmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJwoKY29uc3QgdGl0bGUgPSByZWYoJycpCmNvbnN0IHNsdWcgPSByZWYoJycpCmNvbnN0IGRlc2NyaXB0aW9uID0gcmVmKCcnKQpjb25zdCBwYWludGVySWQgPSByZWY8bnVtYmVyIHwgbnVsbD4obnVsbCkKY29uc3QgY292ZXJVcmwgPSByZWYoJycpCmNvbnN0IGNhcmRVcmwgPSByZWYoJycpCgovLyDQlNGW0LDQv9Cw0LfQvtC9INC00LDRggpjb25zdCBwZXJpb2QgPSByZWY8W0RhdGUgfCBudWxsLCBEYXRlIHwgbnVsbF0+KFtudWxsLCBudWxsXSkKCmNvbnN0IHRvWU1EID0gKGQ6IERhdGUgfCBudWxsKSA9PiAoZCA/IGZvcm1hdChkLCAneXl5eS1NTS1kZCcpIDogbnVsbCkKY29uc3Qgc3RhcnREYXRlID0gY29tcHV0ZWQoKCkgPT4gdG9ZTUQocGVyaW9kLnZhbHVlPy5bMF0gPz8gbnVsbCkpCmNvbnN0IGVuZERhdGUgICA9IGNvbXB1dGVkKCgpID0+IHRvWU1EKHBlcmlvZC52YWx1ZT8uWzFdID8/IG51bGwpKQoKY29uc3QgaXNWYWxpZCA9IGNvbXB1dGVkKCgpID0+CiAgISF0aXRsZS52YWx1ZS50cmltKCkgJiYKICAhIXN0YXJ0RGF0ZS52YWx1ZSAmJgogICEhZW5kRGF0ZS52YWx1ZSAmJgogICEhcGFpbnRlcklkLnZhbHVlCikKCmNvbnN0IHN1Ym1pdCA9IGFzeW5jICgpID0+IHsKICBpZiAoIWlzVmFsaWQudmFsdWUpIHJldHVybgogIGNvbnN0IHBheWxvYWQgPSB7CiAgICB0aXRsZTogdGl0bGUudmFsdWUsCiAgICBzbHVnOiBzbHVnLnZhbHVlLAogICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnZhbHVlLAogICAgc3RhcnREYXRlOiBzdGFydERhdGUudmFsdWUsCiAgICBlbmREYXRlOiBlbmREYXRlLnZhbHVlLAogICAgcGFpbnRlcklkOiBwYWludGVySWQudmFsdWUsCiAgICBjb3ZlclVybDogY292ZXJVcmwudmFsdWUsCiAgICBjYXJkVXJsOiBjYXJkVXJsLnZhbHVlLAogICAgaXNQdWJsaXNoZWQ6IHRydWUKICB9CiAgLy8gVE9ETzog0LfQsNC80ZbQvdC40YLQuCDQvdCwINGA0LXQsNC70YzQvdC40Lkg0LfQsNC/0LjRgiDQtNC+IEFQSQogIGNvbnNvbGUubG9nKCdTdWJtaXQgcGF5bG9hZCcsIHBheWxvYWQpCn0KPC9zY3JpcHQ+Cg==' | base64 -d > pages/admin/exhibitions/new.vue

      - name: Write pages/admin/exhibitions/[id].vue
        run: |
          mkdir -p pages/admin/exhibitions
          echo 'PHRlbXBsYXRlPgogIDxkaXYgY2xhc3M9InAtNiBzcGFjZS15LTYiPgogICAgPGRpdiBjbGFzcz0iZ3JpZCBnYXAtNCBtZDpncmlkLWNvbHMtMiI+CiAgICAgIDxkaXY+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayBtYi0yIHRleHQtc20gZm9udC1tZWRpdW0iPtCd0LDQt9Cy0LAg0LLQuNGB0YLQsNCy0LrQuDwvbGFiZWw+CiAgICAgICAgPGlucHV0IHYtbW9kZWw9InRpdGxlIiB0eXBlPSJ0ZXh0IiBjbGFzcz0idy1mdWxsIGJvcmRlciByb3VuZGVkIHB4LTMgcHktMiIgLz4KICAgICAgPC9kaXY+CiAgICAgIDxkaXY+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayBtYi0yIHRleHQtc20gZm9udC1tZWRpdW0iPlNsdWc8L2xhYmVsPgogICAgICAgIDxpbnB1dCB2LW1vZGVsPSJzbHVnIiB0eXBlPSJ0ZXh0IiBjbGFzcz0idy1mdWxsIGJvcmRlciByb3VuZGVkIHB4LTMgcHktMiIgLz4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2PgogICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIG1iLTIgdGV4dC1zbSBmb250LW1lZGl1bSI+0J7Qv9C40YE8L2xhYmVsPgogICAgICA8dGV4dGFyZWEgdi1tb2RlbD0iZGVzY3JpcHRpb24iIHJvd3M9IjUiIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyIHJvdW5kZWQgcHgtMyBweS0yIj48L3RleHRhcmVhPgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iZ3JpZCBnYXAtNCBtZDpncmlkLWNvbHMtMiI+CiAgICAgIDxkaXY+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayBtYi0yIHRleHQtc20gZm9udC1tZWRpdW0iPtCl0YPQtNC+0LbQvdC40LogKElEKTwvbGFiZWw+CiAgICAgICAgPGlucHV0IHYtbW9kZWwubnVtYmVyPSJwYWludGVySWQiIHR5cGU9Im51bWJlciIgbWluPSIxIiBjbGFzcz0idy1mdWxsIGJvcmRlciByb3VuZGVkIHB4LTMgcHktMiIgLz4KICAgICAgPC9kaXY+CiAgICAgIDxkaXY+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayBtYi0yIHRleHQtc20gZm9udC1tZWRpdW0iPtCe0LHQutC70LDQtNC40L3QutCwIChVUkwpPC9sYWJlbD4KICAgICAgICA8aW5wdXQgdi1tb2RlbD0iY292ZXJVcmwiIHR5cGU9InVybCIgY2xhc3M9InctZnVsbCBib3JkZXIgcm91bmRlZCBweC0zIHB5LTIiIC8+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdj4KICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayBtYi0yIHRleHQtc20gZm9udC1tZWRpdW0iPtCX0L7QsdGA0LDQttC10L3QvdGPINC60LDRgNGC0LrQuCAoVVJMKTwvbGFiZWw+CiAgICAgIDxpbnB1dCB2LW1vZGVsPSJjYXJkVXJsIiB0eXBlPSJ1cmwiIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyIHJvdW5kZWQgcHgtMyBweS0yIiAvPgogICAgPC9kaXY+CgogICAgPENsaWVudE9ubHk+CiAgICAgIDxkaXY+CiAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayBtYi0yIHRleHQtc20gZm9udC1tZWRpdW0iPtCf0LXRgNGW0L7QtCDQstC40YHRgtCw0LLQutC4PC9sYWJlbD4KICAgICAgICA8VnVlRGF0ZVBpY2tlcgogICAgICAgICAgdi1tb2RlbD0icGVyaW9kIgogICAgICAgICAgOmxvY2FsZT0idWsiCiAgICAgICAgICByYW5nZQogICAgICAgICAgOndlZWstc3RhcnQ9IjEiCiAgICAgICAgICA6ZW5hYmxlLXRpbWUtcGlja2VyPSJmYWxzZSIKICAgICAgICAgIGF1dG8tYXBwbHkKICAgICAgICAgIGZvcm1hdD0iZGQuTU0ueXl5eSIKICAgICAgICAgIHBsYWNlaG9sZGVyPSLQntCx0LXRgNGW0YLRjCDQv9C10YDRltC+0LQgKNC3IOKAlCDQv9C+KSIKICAgICAgICAvPgogICAgICA8L2Rpdj4KICAgIDwvQ2xpZW50T25seT4KCiAgICA8ZGl2IGNsYXNzPSJwdC00Ij4KICAgICAgPGJ1dHRvbgogICAgICAgIDpkaXNhYmxlZD0iIWlzVmFsaWQiCiAgICAgICAgY2xhc3M9InB4LTQgcHktMiByb3VuZGVkIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgZGlzYWJsZWQ6b3BhY2l0eS01MCIKICAgICAgICBAY2xpY2s9InVwZGF0ZSIKICAgICAgPgogICAgICAgINCe0L3QvtCy0LjRgtC4INCy0LjRgdGC0LDQstC60YMKICAgICAgPC9idXR0b24+CiAgICA8L2Rpdj4KICA8L2Rpdj4KPC90ZW1wbGF0ZT4KCjxzY3JpcHQgc2V0dXAgbGFuZz0idHMiPgppbXBvcnQgeyByZWYsIGNvbXB1dGVkLCBvbk1vdW50ZWQgfSBmcm9tICd2dWUnCmltcG9ydCBWdWVEYXRlUGlja2VyIGZyb20gJ0B2dWVwaWMvdnVlLWRhdGVwaWNrZXInCmltcG9ydCB7IHVrIH0gZnJvbSAnZGF0ZS1mbnMvbG9jYWxlJwppbXBvcnQgeyBwYXJzZUlTTywgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnCmNvbnN0IHJvdXRlID0gdXNlUm91dGUoKQoKY29uc3QgdGl0bGUgPSByZWYoJycpCmNvbnN0IHNsdWcgPSByZWYoJycpCmNvbnN0IGRlc2NyaXB0aW9uID0gcmVmKCcnKQpjb25zdCBwYWludGVySWQgPSByZWY8bnVtYmVyIHwgbnVsbD4obnVsbCkKY29uc3QgY292ZXJVcmwgPSByZWYoJycpCmNvbnN0IGNhcmRVcmwgPSByZWYoJycpCgovLyDQlNGW0LDQv9Cw0LfQvtC9INC00LDRggpjb25zdCBwZXJpb2QgPSByZWY8W0RhdGUgfCBudWxsLCBEYXRlIHwgbnVsbF0+KFtudWxsLCBudWxsXSkKCmNvbnN0IHRvWU1EID0gKGQ6IERhdGUgfCBudWxsKSA9PiAoZCA/IGZvcm1hdChkLCAneXl5eS1NTS1kZCcpIDogbnVsbCkKY29uc3Qgc3RhcnREYXRlID0gY29tcHV0ZWQoKCkgPT4gdG9ZTUQocGVyaW9kLnZhbHVlPy5bMF0gPz8gbnVsbCkpCmNvbnN0IGVuZERhdGUgICA9IGNvbXB1dGVkKCgpID0+IHRvWU1EKHBlcmlvZC52YWx1ZT8uWzFdID8/IG51bGwpKQoKY29uc3QgaXNWYWxpZCA9IGNvbXB1dGVkKCgpID0+CiAgISF0aXRsZS52YWx1ZS50cmltKCkgJiYKICAhIXN0YXJ0RGF0ZS52YWx1ZSAmJgogICEhZW5kRGF0ZS52YWx1ZSAmJgogICEhcGFpbnRlcklkLnZhbHVlCikKCm9uTW91bnRlZChhc3luYyAoKSA9PiB7CiAgLy8gVE9ETzog0LfQsNCy0LDQvdGC0LDQttGC0LUg0LTQsNC90ZYg0LLQuNGB0YLQsNCy0LrQuCDQt9CwIElECiAgY29uc3QgaXRlbTogYW55ID0gbnVsbAogIGlmIChpdGVtKSB7CiAgICB0aXRsZS52YWx1ZSA9IGl0ZW0udGl0bGUgPz8gJycKICAgIHNsdWcudmFsdWUgPSBpdGVtLnNsdWcgPz8gJycKICAgIGRlc2NyaXB0aW9uLnZhbHVlID0gaXRlbS5kZXNjcmlwdGlvbiA/PyAnJwogICAgcGFpbnRlcklkLnZhbHVlID0gaXRlbS5wYWludGVySWQgPz8gbnVsbAogICAgY292ZXJVcmwudmFsdWUgPSBpdGVtLmNvdmVyVXJsID8/ICcnCiAgICBjYXJkVXJsLnZhbHVlID0gaXRlbS5jYXJkVXJsID8/ICcnCiAgICBwZXJpb2QudmFsdWUgPSBbCiAgICAgIGl0ZW0uc3RhcnREYXRlID8gcGFyc2VJU08oaXRlbS5zdGFydERhdGUpIDogbnVsbCwKICAgICAgaXRlbS5lbmREYXRlID8gcGFyc2VJU08oaXRlbS5lbmREYXRlKSA6IG51bGwKICAgIF0KICB9Cn0pCgpjb25zdCB1cGRhdGUgPSBhc3luYyAoKSA9PiB7CiAgaWYgKCFpc1ZhbGlkLnZhbHVlKSByZXR1cm4KICBjb25zdCBwYXlsb2FkID0gewogICAgdGl0bGU6IHRpdGxlLnZhbHVlLAogICAgc2x1Zzogc2x1Zy52YWx1ZSwKICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi52YWx1ZSwKICAgIHN0YXJ0RGF0ZTogc3RhcnREYXRlLnZhbHVlLAogICAgZW5kRGF0ZTogZW5kRGF0ZS52YWx1ZSwKICAgIHBhaW50ZXJJZDogcGFpbnRlcklkLnZhbHVlLAogICAgY292ZXJVcmw6IGNvdmVyVXJsLnZhbHVlLAogICAgY2FyZFVybDogY2FyZFVybC52YWx1ZQogIH0KICAvLyBUT0RPOiDQt9Cw0LzRltC90LjRgtC4INC90LAg0YDQtdCw0LvRjNC90LjQuSDQt9Cw0L/QuNGCINC00L4gQVBJCiAgY29uc29sZS5sb2coJ1VwZGF0ZSBwYXlsb2FkJywgcGF5bG9hZCkKfQo8L3NjcmlwdD4K' | base64 -d > "pages/admin/exhibitions/[id].vue"

      - name: Commit & push
        run: |
          git config user.name "gallery-bot"
          git config user.email "actions@users.noreply.github.com"
          git add -A
          if git diff --cached --quiet; then
            echo "No changes to commit."
            exit 0
          fi
          git commit -m "${{ github.event.inputs.commit_message }}"
          git push origin HEAD:${{ github.event.inputs.branch }}
